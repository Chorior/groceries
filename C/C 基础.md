# C 基础

本文为博主学习 C primer plus 第五版的笔记，适用于有一定 C++ 基础的人食用。

## 本文结构

* [概述](#overview)
* [C 和 C++](#c_and_c++)
* [格式化输入输出](#scanf_and_printf)

<h2 id="overview">概述</h2>

C 编程的基础策略是使用程序将源代码文件转换为可执行文件，此文件包含可以运行的机器语言代码。C 分为两步来完成这一工作：**编译和链接**。

编译器将源代码转换为中间代码，链接器将此中间代码与其它代码相结合来生成可执行文件。你可以分别编译各个模块，然后使用链接器将编译过的模块结合起来，这样，如果需要改变一个模块，则不必重新编译所有其它模块。

<h2 id="c_and_c++">C 和 C++</h2>

C 的基本语法与 C++ 无异，但是**在传统 C 语言中，所有的变量都必须在一个代码块的开始处进行声明，在这之前不允许任何语句**，C99 遵循 C++ 的惯例，只需要在使用变量之前进行声明即可。

头文件 `inttypes.h` 中包含了常用的整数类型，使用这些整数类型可以便于移植程序。

头文件 `limits.h` 和 `float.h` 提供了有关整数类型和浮点类型的大小限制的详细信息。

**char 变量在 C 中被存储在一块大小与 int 类型相同的内存中，但在 C++ 中只用一个字节进行存储**：

```c
int x = 'ABCD'
char c = 'ABCD'
printf("%d %d %c %c\n",x,'ABCD',c,'ABCD');
// 1094861636 1094861636 D D
```

上面这个例子说明，如果把 'ABCD' 看做一个 int 值，它就是一个4字节的整数值，但是如果把它看做 char 类型，程序就只使用最后一个字节。

<h2 id="scanf_and_printf">格式化输入输出</h2>

输出转换说明 | 意义
----------- | -----------------------------------------
`%c` | 一个字符
`%d` <br> `%i` | 有符号十进制整数
`%e` <br> `%E` | 浮点数，e或E记数法
`%f` | 浮点数，十进制记数法
`%g` <br> `%G` | 根据数值不同自动选择`%f`或`%e` <br> `%e`或`%E`格式在指数小于-4或者大于等于精度时使用
`%o` | 无符号八进制数
`%p` | 指针
`%s` | 字符串
`%u` | 无符号十进制数
`%x` <br> `%X` | 使用十六进制数字0f或0F的无符号十六进制整数
`%%` | 百分号

输出修饰符 | 意义
--------- | ----
`digit(s)` | 字段宽度的最小值，如 "%4d" <br> 如果该字段不能容纳要打印的数或字符串，系统就会使用更宽的字段
`.digit(s)` | 精度，如 "%5.2f" <br> 对于`%e`,`%E`和`%f`转换，是将要在小数点的右边打印的数字的位数 <br> 对于`%g`和`%G`转换，是有效数字的最大位数 <br> 对于`%s`转换，是将要打印的字符的最大数目 <br> 对于整数转换，是将要打印的数字的最小位数 <br> 如果必要，要使用前导零来达到这个位数
`h` | 和整数转换说明符一起使用，表示一个short int或unsigned short int类型数值，如 "%hu"
`hh` | 和整数转换说明符一起使用，表示一个signed char或unsigned char类型数值，如 "%hhu"
`j` | 和整数转换说明符一起使用，表示一个intmax_t或uintmax_t值，如 "%jd"
`l` | 和整数转换说明符一起使用，表示一个long int或unsigned long int值，如 "%ld"
`ll` | 和整数转换说明符一起使用，表示一个long long int或unsigned long long int值，如 "%lld"
`z` | 和整数转换说明符一起使用，表示一个size_t值，如 "%zd"
`L` | 和浮点转换说明符一起使用，表示一个long double值，如 "%Lf"

输出标志 | 意义
------- | ----
`-` | 项目是左对齐的，如 "%-20s"
`+` | 有符号的值若为正，则显示带加号的符号 <br> 若为负，则带减号的符号，如 "%+6.2f"
`#` | 若为`%o`格式，则以0开始 <br> 若为`%x`和`%X`格式，则以`0x`和`0X`开始 <br> 对于浮点数，#保证即使不跟任何数字，也打印一个小数点字符 <br> 对于`%g`和`%G`格式，它防止尾随零被删除，如 "%#o"